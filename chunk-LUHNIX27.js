import{a as G}from"./chunk-ASDK7QSI.js";import{a as J}from"./chunk-2625WBTU.js";import{a as Z}from"./chunk-JCKFSXJE.js";import{b as D,d as N,g as R,m as q,n as W,o as H,t as Y}from"./chunk-RAVIJAHJ.js";import{a as U}from"./chunk-HJXDVH5A.js";import{e as A,g as j,k as B}from"./chunk-M7342E5H.js";import{k as Q,l as $}from"./chunk-UR3PIVFL.js";import{$a as n,Ca as z,Cb as k,Db as T,Ua as x,V as u,Va as v,W as g,Ya as h,Za as y,_a as P,ab as r,bb as p,fb as b,ib as m,kb as l,oa as I,qa as a,qb as V,rb as w,sb as d,tb as _,ub as f,vb as L,wa as C,wb as M,xb as O,yb as S}from"./chunk-2SFP4N2H.js";import{a as E,b as F}from"./chunk-EQDQRRRY.js";var tt=(o,t)=>t.name,et=(o,t)=>t.value,it=(o,t)=>t.id;function nt(o,t){o&1&&(n(0,"div",0)(1,"div",16),p(2,"img",17),r()())}function ot(o,t){if(o&1){let e=b();n(0,"div",18),m("click",function(){let s=u(e).$implicit,c=l();return g(c.filterByCategory(s))}),n(1,"div",19),p(2,"i"),r(),n(3,"div",20),d(4),r()()}if(o&2){let e=t.$implicit,i=l();V("active",i.activeCategory===e.name),a(2),w(e.icon),a(2),_(e.name)}}function rt(o,t){if(o&1&&(n(0,"option",12),d(1),r()),o&2){let e=t.$implicit;P("value",e.value),a(),_(e.label)}}function at(o,t){o&1&&(n(0,"div",14),p(1,"i",21),n(2,"h2"),d(3,"No products found"),r(),n(4,"p"),d(5,"Try adjusting your search or filter criteria."),r()())}function ct(o,t){if(o&1&&(n(0,"div",23),d(1),r()),o&2){let e=l().$implicit;a(),f(" ",e.discount,"% OFF ")}}function st(o,t){if(o&1&&(n(0,"div",24),d(1),r()),o&2){let e=l().$implicit;a(),f(" ",e.category," ")}}function lt(o,t){if(o&1&&(n(0,"span",48),d(1),k(2,"number"),r()),o&2){let e=l().$implicit;a(),f(" \u20A6",T(2,1,e.originalPrice)," ")}}function dt(o,t){if(o&1){let e=b();n(0,"div",49)(1,"button",51),m("click",function(){u(e);let s=l().$implicit,c=l(2);return g(c.decreaseQuantity(s))}),p(2,"i",52),r(),n(3,"span",53),d(4),r(),n(5,"button",54),m("click",function(){u(e);let s=l().$implicit,c=l(2);return g(c.increaseQuantity(s))}),p(6,"i",55),r()()}if(o&2){let e=l().$implicit,i=l(2);a(4),_(i.getProductQuantity(e))}}function pt(o,t){if(o&1){let e=b();n(0,"button",56),m("click",function(){u(e);let s=l().$implicit,c=l(2);return g(c.addToCart(s))}),p(1,"i",57),d(2),r()}if(o&2){let e=l().$implicit;P("disabled",e.stock===0),a(2),f(" ",e.stock===0?"Out of Stock":"Add"," ")}}function mt(o,t){if(o&1){let e=b();n(0,"div",22),x(1,ct,2,1,"div",23),x(2,st,2,1,"div",24),n(3,"button",25),m("click",function(){let s=u(e).$implicit,c=l(2);return g(c.toggleFavourite(s))}),p(4,"i"),r(),n(5,"div",26)(6,"a",27),m("click",function(){let s=u(e).$implicit,c=l(2);return g(c.navigateToProduct(s.id))}),n(7,"img",28),m("load",function(s){u(e);let c=l(2);return g(c.onImageLoad(s))})("error",function(s){let c=u(e).$implicit,X=l(2);return g(X.onImageError(s,c))}),r()()(),n(8,"div",29)(9,"a",27),m("click",function(){let s=u(e).$implicit,c=l(2);return g(c.navigateToProduct(s.id))}),n(10,"h3",30),d(11),r()(),n(12,"p",31),d(13),r(),n(14,"div",32)(15,"div",33),p(16,"i",34),n(17,"span",35),d(18),r()(),n(19,"div",33),p(20,"i",36),n(21,"span",35),d(22),r()(),n(23,"div",37),p(24,"i",38),n(25,"small"),d(26),r()()(),n(27,"div",39)(28,"div",40)(29,"small",41),p(30,"i",42),d(31),r()(),n(32,"small",43),p(33,"i",44),d(34),r()(),n(35,"div",45)(36,"div",46)(37,"div",33)(38,"span",47),d(39),k(40,"number"),r(),x(41,lt,3,3,"span",48),r()(),x(42,dt,7,1,"div",49)(43,pt,3,2,"button",50),r()()()}if(o&2){let e=t.$implicit,i=l(2);a(),v(e.discount?1:-1),a(),v(e.seller_tag?2:-1),a(2),w(e.isFavourite?"fas fa-heart text-danger":"far fa-heart"),a(3),P("src",i.getProductImage(e),I)("alt",e.name),a(4),_(e.name),a(2),_(e.description),a(5),_(e.business_name),a(4),_(e.category),a(4),_(e.address),a(5),L(" ",e.stock," ",e.unit," available "),a(3),f(" Pick up time : ",e.pickupTime),a(5),f("\u20A6",T(40,17,e.price)),a(2),v(e.originalPrice?41:-1),a(),v(e.inCart?42:43)}}function ut(o,t){if(o&1&&(n(0,"div",15),h(1,mt,44,19,"div",22,it),r()),o&2){let e=l();a(),y(e.filteredProducts)}}var K=class o{constructor(t,e,i,s,c){this.productService=t;this.cartService=e;this.toastService=i;this.route=s;this.router=c}products=[];filteredProducts=[];categories=[];activeCategory=null;searchTerm="";sortBy="default";isLoading=!1;sortOptions=[{label:"Default",value:"default"},{label:"Price: Low to High",value:"priceAsc"},{label:"Price: High to Low",value:"priceDesc"},{label:"Name (A\u2013Z)",value:"nameAsc"},{label:"Name (Z\u2013A)",value:"nameDesc"}];ngOnInit(){this.isLoading=!0,this.productService.getCategories().subscribe(t=>this.categories=t),this.productService.getProducts().subscribe(t=>{this.products=t.map(e=>F(E({},e),{inCart:this.cartService.isInCart(e.id),cartQuantity:this.cartService.getQuantity(e.id)})),this.route.queryParams.subscribe(e=>{this.activeCategory=e.category||null,this.applyFilters()}),this.isLoading=!1})}getProductImage(t){return Array.isArray(t.product_images)&&t.product_images.length>0?t.product_images[0]:t.image||"assets/images/placeholder-product.jpg"}onImageLoad(t){t.target.classList.add("loaded")}onImageError(t,e){let i=t.target;i.src="assets/images/placeholder-product.jpg",i.classList.add("loaded")}applyFilters(){let t=[...this.products];if(this.activeCategory&&(t=t.filter(e=>e.category===this.activeCategory)),this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.description.toLowerCase().includes(e))}switch(this.sortBy){case"priceAsc":t.sort((e,i)=>e.price-i.price);break;case"priceDesc":t.sort((e,i)=>i.price-e.price);break;case"nameAsc":t.sort((e,i)=>e.name.localeCompare(i.name));break;case"nameDesc":t.sort((e,i)=>i.name.localeCompare(e.name));break}this.filteredProducts=t}filterByCategory(t){this.activeCategory===t.name?this.activeCategory=null:this.activeCategory=t.name,this.applyFilters()}onSearchChange(){this.applyFilters()}onSortChange(){this.applyFilters()}addToCart(t){if(t.stock>0){let e=this.cartService.addToCart(t);e.success?(t.inCart=!0,t.cartQuantity=this.cartService.getQuantity(t.id),this.toastService.success(`\u{1F6D2} "${t.name}" added to cart!`)):this.toastService.warning(e.message||"Could not add to cart")}else this.toastService.error(`\u274C "${t.name}" is out of stock!`)}toggleFavourite(t){this.productService.toggleFavourite(t.id),t.isFavourite=!t.isFavourite,t.isFavourite?this.toastService.success(`Added "${t.name}" to favorites!`,2e3):this.toastService.info(` Removed "${t.name}" from favorites`,2e3)}navigateToProduct(t){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.router.navigate(["/product",t])},800)}increaseQuantity(t){this.cartService.updateQuantity(t.id,t.cartQuantity+1),t.cartQuantity++}decreaseQuantity(t){t.cartQuantity>1?(this.cartService.updateQuantity(t.id,t.cartQuantity-1),t.cartQuantity--):(this.cartService.removeFromCart(t.id),t.inCart=!1,t.cartQuantity=0)}getProductQuantity(t){return this.cartService.getQuantity(t.id)}static \u0275fac=function(e){return new(e||o)(C(G),C(J),C(Z),C(A),C(j))};static \u0275cmp=z({type:o,selectors:[["app-products"]],decls:22,vars:5,consts:[[1,"loading-overlay"],[1,"main-content","container"],[1,"category-section","mb-4"],[1,"categories-scroll"],[1,"categories"],[1,"category-item",3,"active"],[1,"products-controls","mb-3"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search products...",3,"ngModelChange","input","ngModel"],[1,"sort-box"],[3,"ngModelChange","change","ngModel"],[3,"value"],[1,"products-count","mb-3"],[1,"no-products","text-center"],[1,"products-grid"],[1,"logo-beat"],["src","/images/picksncarts.png","alt","Loading..."],[1,"category-item",3,"click"],[1,"category-icon"],[1,"category-name"],[1,"fas","fa-search","fa-2x","mb-2"],[1,"product-card","position-relative"],[1,"discount-badge","position-absolute","top-0","start-0","m-2"],[1,"seller-tag","position-absolute","top-0","start-0","m-2","mt-5"],[1,"favourite-btn","position-absolute","top-0","end-0","m-2",3,"click"],[1,"product-image"],[3,"click"],[1,"w-100",3,"load","error","src","alt"],[1,"product-info"],[1,"product-title","fw-bold"],[1,"product-description","text-muted","mb-2"],[1,"business-info","mb-2"],[1,"d-flex","align-items-center","gap-2","mb-1"],[1,"fas","fa-store","text-primary","fs-6"],[1,"business-name","fw-semibold","text-dark"],[1,"fas","fa-layer-group","text-primary","fs-6"],[1,"d-flex","align-items-center","gap-2","text-muted"],[1,"fas","fa-map-marker-alt","fs-6"],[1,"product-meta","mb-3"],[1,"quantity-info"],[1,"text-muted"],[1,"fas","fa-box","me-1"],[1,"text-primary"],[1,"fas","fa-clock","me-2"],[1,"product-footer","d-flex","justify-content-between","align-items-center"],[1,"price"],[1,"current-price","fw-bold","text-primary"],[1,"original-price","text-muted","text-decoration-line-through"],[1,"quantity-controls","d-flex","align-items-center","gap-2"],[1,"add-to-cart-btn","btn","btn-primary","px-3","py-2",3,"disabled"],[1,"btn","btn-outline-primary","btn-sm","px-2","py-1",3,"click"],[1,"fas","fa-minus"],[1,"quantity","fw-bold"],[1,"btn","btn-primary","btn-sm","px-2","py-1",3,"click"],[1,"fas","fa-plus"],[1,"add-to-cart-btn","btn","btn-primary","px-3","py-2",3,"click","disabled"],[1,"fas","fa-plus","me-1"]],template:function(e,i){e&1&&(x(0,nt,3,0,"div",0),n(1,"div",1)(2,"section",2)(3,"div",3)(4,"div",4),h(5,ot,5,5,"div",5,tt),r()()(),n(7,"div",6)(8,"div",7),p(9,"i",8),n(10,"input",9),S("ngModelChange",function(c){return O(i.searchTerm,c)||(i.searchTerm=c),c}),m("input",function(){return i.onSearchChange()}),r()(),n(11,"div",10)(12,"label"),d(13,"Sort by:"),r(),n(14,"select",11),S("ngModelChange",function(c){return O(i.sortBy,c)||(i.sortBy=c),c}),m("change",function(){return i.onSortChange()}),h(15,rt,2,2,"option",12,et),r()()(),n(17,"div",13),d(18),r(),x(19,at,6,0,"div",14)(20,ut,3,0,"div",15),r(),p(21,"app-footer")),e&2&&(v(i.isLoading?0:-1),a(5),y(i.categories),a(5),M("ngModel",i.searchTerm),a(4),M("ngModel",i.sortBy),a(),y(i.sortOptions),a(3),f(" ",i.filteredProducts.length," products found "),a(),v(i.filteredProducts.length===0?19:20))},dependencies:[$,B,Y,W,H,D,q,N,R,U,Q],styles:[".products-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:30px}.category-section[_ngcontent-%COMP%]{padding:20px 0;margin-top:18%}.categories-scroll[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:5px;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.categories-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories[_ngcontent-%COMP%]{display:flex;gap:12px;min-width:max-content;padding:5px 2px}.category-item[_ngcontent-%COMP%]{text-align:center;cursor:pointer;transition:var(--transition);position:relative;min-width:70px;flex-shrink:0}.category-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.category-item.active[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-dark),var(--primary));opacity:.4}.category-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--secondary));display:flex;align-items:center;justify-content:center;margin:0 auto 6px;color:#fff;font-size:1.1rem;box-shadow:var(--shadow);transition:var(--transition)}.category-item[_ngcontent-%COMP%]:hover   .category-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-dark),var(--primary));transform:scale(1.05)}.category-name[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;color:var(--dark);margin-bottom:3px;line-height:1.2}.category-count[_ngcontent-%COMP%]{font-size:.6rem;color:#6b7280;background-color:var(--light);padding:1px 5px;border-radius:8px;font-weight:500}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--dark);margin:0;text-transform:capitalize}.products-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--gray-color)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 20px 12px 45px;border-radius:25px;border:1px solid var(--border);background-color:var(--light);font-size:.9rem;transition:var(--transition)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);background-color:var(--lighter);box-shadow:0 0 0 3px #1a5d541a}.sort-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sort-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--dark)}.sort-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid var(--border);border-radius:var(--radius);background-color:var(--lighter);color:var(--dark);cursor:pointer}.products-count[_ngcontent-%COMP%]{color:var(--gray-color);margin-bottom:20px;font-size:.9rem}.no-products[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.no-products-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--border);margin-bottom:20px}.no-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px;color:var(--dark)}.no-products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-color)}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:var(--transition);cursor:pointer;border:1px solid var(--border);position:relative}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.product-image[_ngcontent-%COMP%]{position:relative;height:160px;overflow:hidden;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s infinite}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:var(--transition);position:relative;z-index:1}.product-image[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{background:none;animation:none}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.discount-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--food-orange),var(--food-yellow));color:#fff;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:700;box-shadow:var(--shadow);position:absolute;top:10px;left:10px;z-index:20!important;pointer-events:auto}.seller-tag[_ngcontent-%COMP%]{background:#1a5d54e6;color:#fff;padding:3px 8px;border-radius:8px;font-size:.65rem;font-weight:600;box-shadow:var(--shadow);position:absolute;top:45px;left:10px;z-index:20!important;pointer-events:auto}.favourite-btn[_ngcontent-%COMP%]{background:#fffffff2;border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:#6b7280;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:absolute;top:10px;right:10px;z-index:20!important;pointer-events:auto}.favourite-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1);color:var(--danger)}.product-info[_ngcontent-%COMP%]{padding:15px;position:relative;z-index:2;background:#fff}.product-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin-bottom:8px;color:var(--primary);line-height:1.3}.product-description[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-bottom:10px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.business-info[_ngcontent-%COMP%]{margin-bottom:10px}.business-name[_ngcontent-%COMP%]{font-size:.8rem}.product-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:12px;font-size:.75rem}.product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:end}.price[_ngcontent-%COMP%]{flex:1}.current-price[_ngcontent-%COMP%]{font-weight:800;color:var(--primary);font-size:1.1rem}.original-price[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af}.quantity-controls[_ngcontent-%COMP%]{background:var(--light);border-radius:20px;padding:3px;box-shadow:var(--shadow);z-index:10;position:relative}.quantity-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0;font-size:.7rem}.quantity[_ngcontent-%COMP%]{min-width:20px;text-align:center;font-size:.8rem}.add-to-cart-btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:600;font-size:.8rem;transition:var(--transition);box-shadow:var(--shadow);padding:6px 12px;z-index:10;position:relative}.add-to-cart-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-to-cart-btn[_ngcontent-%COMP%]:disabled{background-color:#6b7280;cursor:not-allowed}@media (min-width: 768px){.products-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}.products-controls[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.product-image[_ngcontent-%COMP%]{height:180px}}@media (min-width: 1024px){.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}"]})};export{K as Products};
