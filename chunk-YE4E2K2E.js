import{a as q}from"./chunk-ASDK7QSI.js";import{a as z}from"./chunk-2625WBTU.js";import{a as F}from"./chunk-HJXDVH5A.js";import{e as D}from"./chunk-M7342E5H.js";import{k as E,l as T}from"./chunk-UR3PIVFL.js";import{$a as e,Ca as S,Cb as f,Db as x,Ua as v,V as m,Va as b,W as g,Xa as w,Ya as M,Za as O,_a as P,ab as i,bb as l,fb as y,ib as _,kb as s,oa as C,qa as n,qb as I,rb as k,sb as a,tb as u,ub as p,wa as h}from"./chunk-2SFP4N2H.js";import"./chunk-EQDQRRRY.js";var B=(o,r)=>r.id;function j(o,r){if(o&1&&(e(0,"div",7),a(1),i()),o&2){let t=s(2);n(),p("",t.product.discount,"% OFF")}}function $(o,r){if(o&1){let t=y();e(0,"button",36),_("click",function(){let d=m(t).$index,A=s(2);return g(A.selectImage(d))}),l(1,"img",5),i()}if(o&2){let t=r.$implicit,c=r.$index,d=s(2);I("active",c===d.selectedImageIndex),n(),P("src",t,C)("alt","Thumbnail "+(c+1))}}function Q(o,r){if(o&1&&(e(0,"div",17),l(1,"i",37),e(2,"div")(3,"h4",15),a(4,"Pickup Time"),i(),e(5,"p",16),a(6),i()()()),o&2){let t=s(2);n(6),u(t.product.pickupTime)}}function R(o,r){if(o&1){let t=y();e(0,"div",40)(1,"div",41),l(2,"img",5),e(3,"button",42),_("click",function(){m(t);let d=s(3);return g(d.toggleFavourite())}),l(4,"i"),i(),e(5,"div",7),a(6),i()(),e(7,"div",43)(8,"h3",44),a(9),i(),e(10,"div",45)(11,"span",46),a(12),f(13,"number"),i(),e(14,"span",23),a(15),f(16,"number"),i()()()()}if(o&2){let t=r.$implicit;n(2),P("src",t.product_images[0],C)("alt",t.name),n(2),k(t.isFavourite?"fas fa-heart":"far fa-heart"),n(2),p("",t.discount,"% OFF"),n(3),u(t.name),n(3),p("\u20A6",x(13,8,t.price)),n(3),p("\u20A6",x(16,10,t.originalPrice))}}function U(o,r){if(o&1&&(e(0,"section",35)(1,"h2",38),a(2,"You might also like"),i(),e(3,"div",39),M(4,R,17,12,"div",40,B),i()()),o&2){let t=s(2);n(4),O(t.relatedProducts)}}function N(o,r){if(o&1){let t=y();e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l(5,"img",5),e(6,"button",6),_("click",function(){m(t);let d=s();return g(d.toggleFavourite())}),l(7,"i"),i(),v(8,j,2,1,"div",7),i(),e(9,"div",8),M(10,$,2,4,"button",9,w),i()(),e(12,"div",10)(13,"h1",11),a(14),i(),e(15,"p",12),a(16),i(),e(17,"div",13),l(18,"i",14),e(19,"div")(20,"h4",15),a(21),i(),e(22,"p",16),a(23),i()()(),v(24,Q,7,1,"div",17),e(25,"div",13),l(26,"i",18),e(27,"div")(28,"h6",19),a(29),i()()(),e(30,"div",20)(31,"div",21)(32,"span",22),a(33),f(34,"number"),i(),e(35,"span",23),a(36),f(37,"number"),i()(),e(38,"div",24),a(39),f(40,"number"),i()(),e(41,"div",25)(42,"label",26),a(43,"Quantity:"),i(),e(44,"div",27)(45,"button",28),_("click",function(){m(t);let d=s();return g(d.decreaseQuantity())}),l(46,"i",29),i(),e(47,"span",30),a(48),i(),e(49,"button",28),_("click",function(){m(t);let d=s();return g(d.increaseQuantity())}),l(50,"i",31),i()()(),e(51,"div",32)(52,"button",33),_("click",function(){m(t);let d=s();return g(d.addToCart())}),l(53,"i",34),a(54),f(55,"number"),i()()()(),v(56,U,6,0,"section",35),i()()}if(o&2){let t=s();n(5),P("src",t.product.product_images[t.selectedImageIndex],C)("alt",t.product.name),n(2),k(t.product.isFavourite?"fas fa-heart":"far fa-heart"),n(),b(t.product.discount?8:-1),n(2),O(t.product.product_images),n(4),u(t.product.name),n(2),u(t.product.description),n(5),u(t.product.business_name),n(2),u(t.product.address),n(),b(t.product.pickupTime?24:-1),n(5),p(" Best Before: ",t.product.expiry_date),n(4),p("\u20A6",x(34,17,t.product.price)),n(3),p("\u20A6",x(37,19,t.product.originalPrice)),n(3),p(" You save \u20A6",x(40,21,(t.product.originalPrice??0)-t.product.price)," "),n(9),u(t.quantity),n(6),p(" Add to Cart - \u20A6",x(55,23,t.product.price*t.quantity)," "),n(2),b(t.relatedProducts.length>0?56:-1)}}var V=class o{constructor(r,t,c){this.route=r;this.productService=t;this.cartService=c}product;quantity=1;selectedImageIndex=0;relatedProducts=[];ngOnInit(){this.route.params.subscribe(r=>{let t=+r.id;this.productService.getProduct(t).subscribe(c=>{c&&(this.product=c,typeof this.product.product_images=="string"&&(this.product.product_images=[this.product.product_images]),this.loadRelatedProducts())})})}loadRelatedProducts(){this.productService.getProductsByCategory(this.product.category_id).subscribe(r=>{this.relatedProducts=r.filter(t=>t.id!==this.product.id).slice(0,3)})}toggleFavourite(){this.productService.toggleFavourite(this.product.id),this.product.isFavourite=!this.product.isFavourite}addToCart(){for(let r=0;r<this.quantity;r++)this.cartService.addToCart(this.product);this.product.inCart=!0}increaseQuantity(){this.quantity++}decreaseQuantity(){this.quantity>1&&this.quantity--}selectImage(r){this.selectedImageIndex=r}static \u0275fac=function(t){return new(t||o)(h(D),h(q),h(z))};static \u0275cmp=S({type:o,selectors:[["app-product-details"]],decls:2,vars:1,consts:[[1,"main-content"],[1,"container"],[1,"product-details"],[1,"product-gallery"],[1,"main-image","position-relative"],["loading","lazy",3,"src","alt"],["type","button","aria-label","Toggle favourite",1,"favourite-btn",3,"click"],[1,"discount-badge"],[1,"image-thumbnails","d-flex","flex-wrap"],["type","button",1,"thumbnail",3,"active"],[1,"product-info"],[1,"product-title"],[1,"product-description","text-muted"],[1,"store-info","d-flex","align-items-center"],[1,"fas","fa-store","me-2"],[1,"mb-0"],[1,"text-muted","small"],[1,"pickup-info","d-flex","align-items-center","mt-3"],[1,"fas","fa-box","me-2"],[1,"mb-0","text-muted"],[1,"price-section","mt-3"],[1,"price","d-flex","align-items-baseline","gap-2"],[1,"current-price","fw-bold","text-success"],[1,"original-price","text-decoration-line-through","text-secondary","small"],[1,"savings","text-muted","small"],[1,"quantity-section","mt-3"],[1,"form-label"],[1,"quantity-controls","d-flex","align-items-center","gap-2"],["type","button",1,"quantity-btn","btn-outline-secondary",3,"click"],[1,"fas","fa-minus"],[1,"quantity"],[1,"fas","fa-plus"],[1,"action-buttons","mt-4"],["type","button",1,"add-to-cart-btn","btn","btn-primary","w-100",3,"click"],[1,"fas","fa-shopping-cart","me-2"],[1,"related-products","mt-5"],["type","button",1,"thumbnail",3,"click"],[1,"fas","fa-clock","me-2"],[1,"section-title","mb-3"],[1,"products-grid","d-grid","gap-3"],[1,"product-card"],[1,"product-image","position-relative"],["type","button",1,"favourite-btn",3,"click"],[1,"product-info","mt-2"],[1,"product-title","h6"],[1,"price"],[1,"current-price","text-success","fw-bold"]],template:function(t,c){t&1&&(v(0,N,57,25,"div",0),l(1,"app-footer")),t&2&&b(c.product?0:-1)},dependencies:[T,F,E],styles:[".product-details[_ngcontent-%COMP%]{display:grid;gap:40px;margin-bottom:40px}.product-gallery[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.main-image[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover}.favourite-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:#ffffffe6;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:var(--danger);font-size:1.2rem}.favourite-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;background:var(--food-orange);color:#fff;padding:6px 12px;border-radius:4px;font-size:.9rem;font-weight:600}.image-thumbnails[_ngcontent-%COMP%]{display:flex;gap:10px;overflow-x:auto}.thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:var(--radius);overflow:hidden;cursor:pointer;border:2px solid transparent;transition:var(--transition);flex-shrink:0}.thumbnail.active[_ngcontent-%COMP%]{border-color:var(--primary)}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.product-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--border);padding-bottom:15px}.product-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--dark);margin-bottom:10px}.add-to-cart-btn.btn.btn-primary[_ngcontent-%COMP%]:active{background-color:var(--primary-dark);opacity:.7}.product-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.stars[_ngcontent-%COMP%]{color:var(--food-yellow)}.product-description[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:var(--gray-color)}.store-info[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:var(--light);border-radius:var(--radius)}.store-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary)}.store-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;color:var(--dark)}.store-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--gray-color);font-size:.9rem}.price-section[_ngcontent-%COMP%]{background:var(--accent);padding:20px;border-radius:var(--radius);text-align:center}.current-price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary);display:block}.original-price[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--gray-color);text-decoration:line-through;display:block;margin-bottom:10px}.savings[_ngcontent-%COMP%]{font-weight:600;color:var(--success)}.quantity-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.quantity-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--dark)}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background:var(--light);border-radius:25px;padding:8px}.quantity-btn[_ngcontent-%COMP%]{background:#fff;border:none;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:var(--dark);font-size:1rem}.quantity-btn[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff}.quantity[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;min-width:30px;text-align:center}.action-buttons[_ngcontent-%COMP%]{margin-top:20px}.add-to-cart-btn[_ngcontent-%COMP%]{width:100%;padding:15px;font-size:1.1rem;display:flex;align-items:center;justify-content:center;gap:10px}.related-products[_ngcontent-%COMP%]{margin-top:40px}@media (min-width: 768px){.product-details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px}.image-thumbnails[_ngcontent-%COMP%]{justify-content:center}}@media (min-width: 1024px){.product-details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:60px}}"]})};export{V as ProductDetails};
