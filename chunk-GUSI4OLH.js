import{a as L}from"./chunk-ASDK7QSI.js";import{a as j}from"./chunk-2625WBTU.js";import{a as Q}from"./chunk-JCKFSXJE.js";import{g as z,h as V,k as $}from"./chunk-M7342E5H.js";import{k as T,l as I}from"./chunk-UR3PIVFL.js";import{$a as i,Ca as S,Cb as P,Db as y,Q as b,Ua as v,V as u,Va as x,W as p,Ya as O,Za as F,_a as h,ab as n,bb as m,fb as C,ib as g,kb as s,oa as M,qa as a,sb as c,tb as _,ub as f,vb as E}from"./chunk-2SFP4N2H.js";import{a as w,b as k}from"./chunk-EQDQRRRY.js";var R=(o,e)=>e.id;function D(o,e){o&1&&(i(0,"div",4)(1,"div",6),m(2,"i",7),n(),i(3,"h2"),c(4,"No favourites yet"),n(),i(5,"p"),c(6,"Start adding your favourite food surprises to see them here!"),n(),i(7,"a",8),m(8,"i",9),c(9," Explore Foods "),n()())}function N(o,e){if(o&1&&(i(0,"div",11),c(1),n()),o&2){let t=s().$implicit;a(),f(" ",t.discount,"% OFF ")}}function Y(o,e){if(o&1&&(i(0,"div",12),c(1),n()),o&2){let t=s().$implicit;a(),f(" ",t.category," ")}}function B(o,e){if(o&1&&(i(0,"span",37),c(1),P(2,"number"),n()),o&2){let t=s().$implicit;a(),f(" \u20A6",y(2,1,t.originalPrice)," ")}}function H(o,e){if(o&1){let t=C();i(0,"div",38)(1,"button",43),g("click",function(){u(t);let d=s().$implicit,l=s(2);return p(l.decreaseQuantity(d))}),m(2,"i",44),n(),i(3,"span",45),c(4),n(),i(5,"button",46),g("click",function(){u(t);let d=s().$implicit,l=s(2);return p(l.increaseQuantity(d))}),m(6,"i",47),n()()}if(o&2){let t=s().$implicit,r=s(2);a(4),_(r.getProductQuantity(t))}}function U(o,e){if(o&1){let t=C();i(0,"button",48),g("click",function(){u(t);let d=s().$implicit,l=s(2);return p(l.addToCart(d))}),m(1,"i",49),c(2),n()}if(o&2){let t=s().$implicit;h("disabled",t.stock===0),a(2),f(" ",t.stock===0?"Out of Stock":"Add"," ")}}function G(o,e){if(o&1){let t=C();i(0,"div",10),v(1,N,2,1,"div",11),v(2,Y,2,1,"div",12),i(3,"button",13),g("click",function(){let d=u(t).$implicit,l=s(2);return p(l.toggleFavourite(d))}),m(4,"i",14),n(),i(5,"div",15)(6,"a",16),g("click",function(){let d=u(t).$implicit,l=s(2);return p(l.navigateToProduct(d.id))}),i(7,"img",17),g("load",function(d){u(t);let l=s(2);return p(l.onImageLoad(d))})("error",function(d){let l=u(t).$implicit,A=s(2);return p(A.onImageError(d,l))}),n()()(),i(8,"div",18)(9,"a",16),g("click",function(){let d=u(t).$implicit,l=s(2);return p(l.navigateToProduct(d.id))}),i(10,"h3",19),c(11),n()(),i(12,"p",20),c(13),n(),i(14,"div",21)(15,"div",22),m(16,"i",23),i(17,"span",24),c(18),n()(),i(19,"div",22),m(20,"i",25),i(21,"span",24),c(22),n()(),i(23,"div",26),m(24,"i",27),i(25,"small"),c(26),n()()(),i(27,"div",28)(28,"div",29)(29,"small",30),m(30,"i",31),c(31),n()(),i(32,"small",32),m(33,"i",33),c(34),n()(),i(35,"div",34)(36,"div",35)(37,"div",22)(38,"span",36),c(39),P(40,"number"),n(),v(41,B,3,3,"span",37),n()(),v(42,H,7,1,"div",38)(43,U,3,2,"button",39),n(),i(44,"div",40)(45,"button",41),g("click",function(){let d=u(t).$implicit,l=s(2);return p(l.removeFromFavourites(d))}),m(46,"i",42),c(47," Remove from Favourites "),n()()()()}if(o&2){let t=e.$implicit,r=s(2);a(),x(t.discount?1:-1),a(),x(t.category?2:-1),a(5),h("src",r.getProductImage(t),M)("alt",t.name),a(4),_(t.name),a(2),_(t.description),a(5),_(t.business_name),a(4),_(t.category),a(4),_(t.address),a(5),E(" ",t.stock," ",t.unit," available "),a(3),f(" Pick up time : ",t.pickupTime),a(5),f("\u20A6",y(40,15,t.price)),a(2),x(t.originalPrice?41:-1),a(),x(t.inCart?42:43)}}function J(o,e){if(o&1&&(i(0,"div",5),O(1,G,48,17,"div",10,R),n()),o&2){let t=s();a(),F(t.favouriteProducts)}}var q=class o{favouriteProducts=[];isLoading=!1;productService=b(L);cartService=b(j);toastService=b(Q);router=b(z);ngOnInit(){this.loadFavourites()}loadFavourites(){this.productService.getProducts().subscribe(e=>{this.favouriteProducts=e.filter(t=>t.isFavourite).map(t=>k(w({},t),{inCart:this.cartService.isInCart(t.id),cartQuantity:this.cartService.getQuantity(t.id)}))})}getProductImage(e){return Array.isArray(e.product_images)&&e.product_images.length>0?e.product_images[0]:typeof e.product_images=="string"?e.product_images:e.image||"assets/images/placeholder-product.jpg"}onImageLoad(e){e.target.classList.add("loaded")}onImageError(e,t){let r=e.target;r.src="assets/images/placeholder-product.jpg",r.classList.add("loaded")}toggleFavourite(e){this.productService.toggleFavourite(e.id),e.isFavourite=!e.isFavourite,e.isFavourite?this.toastService.success(`Added "${e.name}" to favorites!`,2e3):(this.toastService.info(`Removed "${e.name}" from favorites`,2e3),this.favouriteProducts=this.favouriteProducts.filter(t=>t.id!==e.id))}addToCart(e){if(e.stock>0){let t=this.cartService.addToCart(e);t.success?(this.toastService.success(`"${e.name}" added to cart!`,2e3),e.inCart=!0,e.cartQuantity=this.cartService.getQuantity(e.id)):t.message&&this.toastService.warning(t.message,3e3)}else this.toastService.error(`"${e.name}" is out of stock!`,3e3)}increaseQuantity(e){let t=this.getProductQuantity(e),r=this.cartService.updateQuantity(e.id,t+1);r.success?e.cartQuantity=t+1:r.message&&this.toastService.warning(r.message,2e3)}decreaseQuantity(e){let t=this.getProductQuantity(e);t>1?this.cartService.updateQuantity(e.id,t-1).success&&(e.cartQuantity=t-1):(this.cartService.removeFromCart(e.id),e.inCart=!1,e.cartQuantity=0,this.toastService.info(`"${e.name}" removed from cart`,2e3))}getProductQuantity(e){return this.cartService.getQuantity(e.id)}removeFromFavourites(e){this.productService.toggleFavourite(e.id),this.favouriteProducts=this.favouriteProducts.filter(t=>t.id!==e.id),this.toastService.info(`"${e.name}" removed from favourites`,2e3)}navigateToProduct(e){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.router.navigate(["/product",e])},800)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["app-favourites"]],decls:7,vars:2,consts:[[1,"main-content"],[1,"container"],[1,"favourites-header"],[1,"page-title"],[1,"empty-favourites"],[1,"products-grid"],[1,"empty-icon"],[1,"fas","fa-heart"],["routerLink","/home",1,"btn","btn-primary"],[1,"fas","fa-utensils"],[1,"product-card","position-relative"],[1,"discount-badge","position-absolute","top-0","start-0","m-2"],[1,"seller-tag","position-absolute","top-0","start-0","m-2","mt-5"],[1,"favourite-btn","position-absolute","top-0","end-0","m-2",3,"click"],[1,"fas","fa-heart","text-danger"],[1,"product-image"],[3,"click"],[1,"w-100",3,"load","error","src","alt"],[1,"product-info"],[1,"product-title","fw-bold"],[1,"product-description","text-muted","mb-2"],[1,"business-info","mb-2"],[1,"d-flex","align-items-center","gap-2","mb-1"],[1,"fas","fa-store","text-primary","fs-6"],[1,"business-name","fw-semibold","text-dark"],[1,"fas","fa-layer-group","text-primary","fs-6"],[1,"d-flex","align-items-center","gap-2","text-muted"],[1,"fas","fa-map-marker-alt","fs-6"],[1,"product-meta","mb-3"],[1,"quantity-info"],[1,"text-muted"],[1,"fas","fa-box","me-1"],[1,"text-primary"],[1,"fas","fa-clock","me-2"],[1,"product-footer","d-flex","justify-content-between","align-items-center"],[1,"price"],[1,"current-price","fw-bold","text-primary"],[1,"original-price","text-muted","text-decoration-line-through"],[1,"quantity-controls","d-flex","align-items-center","gap-2"],[1,"add-to-cart-btn","btn","btn-primary","px-3","py-2",3,"disabled"],[1,"mt-3","pt-2","border-top"],[1,"remove-btn","w-100","btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash","me-2"],[1,"btn","btn-outline-primary","btn-sm","px-2","py-1",3,"click"],[1,"fas","fa-minus"],[1,"quantity","fw-bold"],[1,"btn","btn-primary","btn-sm","px-2","py-1",3,"click"],[1,"fas","fa-plus"],[1,"add-to-cart-btn","btn","btn-primary","px-3","py-2",3,"click","disabled"],[1,"fas","fa-plus","me-1"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),c(4),n()(),v(5,D,10,0,"div",4)(6,J,3,0,"div",5),n()()),t&2&&(a(4),f("",r.favouriteProducts.length," items"),a(),x(r.favouriteProducts.length===0?5:6))},dependencies:[I,$,V,T],styles:[".favourites-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px 0}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary);margin:0}.favourites-count[_ngcontent-%COMP%]{background:var(--light);padding:8px 16px;border-radius:20px;font-weight:600;color:var(--dark)}.empty-favourites[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary);margin-bottom:20px;opacity:.7}.empty-favourites[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--dark);margin-bottom:10px}.empty-favourites[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:30px}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:var(--transition);cursor:pointer;border:1px solid var(--border);position:relative}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.product-image[_ngcontent-%COMP%]{position:relative;height:160px;overflow:hidden;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:var(--transition);position:relative;z-index:1}.product-image[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{background:none;animation:none}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.discount-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--food-orange),var(--food-yellow));color:#fff;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:700;box-shadow:var(--shadow);position:absolute;top:10px;left:10px;z-index:20!important;pointer-events:auto}.seller-tag[_ngcontent-%COMP%]{background:#1a5d54e6;color:#fff;padding:3px 8px;border-radius:8px;font-size:.65rem;font-weight:600;box-shadow:var(--shadow);position:absolute;top:45px;left:10px;z-index:20!important;pointer-events:auto}.favourite-btn[_ngcontent-%COMP%]{background:#fffffff2;border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:#dc2626;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:absolute;top:10px;right:10px;z-index:20!important;pointer-events:auto}.favourite-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.product-info[_ngcontent-%COMP%]{padding:15px;position:relative;z-index:2;background:#fff}.product-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin-bottom:8px;color:var(--primary);line-height:1.3;cursor:pointer}.product-description[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-bottom:10px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.business-info[_ngcontent-%COMP%]{margin-bottom:10px}.business-name[_ngcontent-%COMP%]{font-size:.8rem}.product-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:12px;font-size:.75rem}.product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:end}.price[_ngcontent-%COMP%]{flex:1}.current-price[_ngcontent-%COMP%]{font-weight:800;color:var(--primary);font-size:1.1rem}.original-price[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af}.quantity-controls[_ngcontent-%COMP%]{background:var(--light);border-radius:20px;padding:3px;box-shadow:var(--shadow);z-index:10;position:relative}.quantity-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0;font-size:.7rem}.quantity[_ngcontent-%COMP%]{min-width:20px;text-align:center;font-size:.8rem}.add-to-cart-btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:600;font-size:.8rem;transition:var(--transition);box-shadow:var(--shadow);padding:6px 12px;z-index:10;position:relative}.add-to-cart-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-lg)}.add-to-cart-btn[_ngcontent-%COMP%]:disabled{background-color:#6b7280;cursor:not-allowed}.remove-btn[_ngcontent-%COMP%]{border-radius:8px;font-size:.8rem;transition:var(--transition)}.remove-btn[_ngcontent-%COMP%]:hover{background-color:#dc2626;color:#fff;transform:translateY(-1px)}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media (min-width: 768px){.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:24px}.product-image[_ngcontent-%COMP%]{height:180px}.discount-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:5px 10px}.seller-tag[_ngcontent-%COMP%]{font-size:.7rem;padding:4px 9px}.favourite-btn[_ngcontent-%COMP%]{width:36px;height:36px}}@media (min-width: 1024px){.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}"]})};export{q as Favourites};
