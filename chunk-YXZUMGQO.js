import{a as K}from"./chunk-ASDK7QSI.js";import{a as X}from"./chunk-2625WBTU.js";import{a as G}from"./chunk-JCKFSXJE.js";import{b as W,d as N,g as D,j as L,m as H,n as Y,o as q,t as U}from"./chunk-RAVIJAHJ.js";import{a as J}from"./chunk-HJXDVH5A.js";import{k as j}from"./chunk-M7342E5H.js";import{k as R,l as $}from"./chunk-UR3PIVFL.js";import{$a as r,Bb as A,Ca as V,Cb as F,Db as E,Ua as x,V as m,Va as h,W as u,Xa as Q,Ya as b,Za as C,_a as w,ab as n,bb as g,fb as _,ib as p,kb as d,oa as I,qa as c,qb as y,rb as M,sb as o,tb as v,ub as f,vb as z,wa as P,wb as O,xb as S,yb as k}from"./chunk-2SFP4N2H.js";import{a as B,b as T}from"./chunk-EQDQRRRY.js";var ee=()=>[1,2,3,4,5],te=(a,e)=>e.name,ie=(a,e)=>e.value,re=(a,e)=>e.id;function ne(a,e){if(a&1){let t=_();r(0,"div",34),p("click",function(){let l=m(t).$implicit,s=d();return u(s.selectCategory(l))}),r(1,"div",35),g(2,"i"),n(),r(3,"span",36),o(4),n()()}if(a&2){let t=e.$implicit;y("active",t.active),c(2),M(t.icon),c(2),v(t.name)}}function oe(a,e){if(a&1){let t=_();r(0,"div",37),p("click",function(){let l=m(t).$implicit,s=d();return s.filters.rating=l,u(s.applyFilters())}),g(1,"i",38),r(2,"span"),o(3,"& up"),n()()}if(a&2){let t=e.$implicit,i=d();y("active",i.filters.rating>=t)}}function ae(a,e){if(a&1&&(r(0,"option",26),o(1),n()),a&2){let t=e.$implicit;w("value",t.value),c(),v(t.label)}}function ce(a,e){if(a&1&&(r(0,"div",42),o(1),n()),a&2){let t=d().$implicit;c(),f("",t.discount,"% OFF")}}function le(a,e){if(a&1&&(r(0,"span",52),o(1),F(2,"number"),n()),a&2){let t=d().$implicit;c(),f("\u20A6",E(2,1,t.originalPrice))}}function se(a,e){if(a&1){let t=_();r(0,"div",53)(1,"button",55),p("click",function(){m(t);let l=d().$implicit,s=d();return u(s.decreaseQuantity(l))}),o(2,"Minus"),n(),r(3,"span"),o(4),n(),r(5,"button",55),p("click",function(){m(t);let l=d().$implicit,s=d();return u(s.increaseQuantity(l))}),o(6,"Plus"),n()()}if(a&2){let t=d().$implicit,i=d();c(4),v(i.getProductQuantity(t))}}function de(a,e){if(a&1){let t=_();r(0,"button",56),p("click",function(){m(t);let l=d().$implicit,s=d();return u(s.addToCart(l))}),g(1,"i"),o(2),n()}if(a&2){let t=d().$implicit;y("added",t.inCart),w("disabled",t.stock===0),c(),M(t.inCart?"fas fa-check":"fas fa-plus"),c(),f(" ",t.inCart?"Added":t.stock===0?"Out of Stock":"Add"," ")}}function pe(a,e){if(a&1){let t=_();r(0,"div",32)(1,"div",39),g(2,"img",40),r(3,"button",41),p("click",function(){let l=m(t).$implicit,s=d();return u(s.toggleFavourite(l))}),g(4,"i"),n(),x(5,ce,2,1,"div",42),n(),r(6,"div",43)(7,"h3",44),o(8),n(),r(9,"p",45),o(10),n(),r(11,"div",46)(12,"div",47),g(13,"i",38),r(14,"span"),o(15),n()(),r(16,"div",48),o(17),n()(),r(18,"div",49)(19,"div",50)(20,"span",51),o(21),F(22,"number"),n(),x(23,le,3,3,"span",52),n(),x(24,se,7,1,"div",53)(25,de,3,6,"button",54),n()()()}if(a&2){let t=e.$implicit,i=d();c(2),w("src",i.getProductImage(t),I)("alt",t.name),c(2),M(t.isFavourite?"fas fa-heart":"far fa-heart"),c(),h(t.discount?5:-1),c(3),v(t.name),c(2),v(t.description),c(5),z("",t.rating," (",t.reviews,")"),c(2),f("",t.distance," mi"),c(4),f("\u20A6",E(22,13,t.price)),c(2),h(t.originalPrice?23:-1),c(),h(t.inCart?24:25)}}function ge(a,e){if(a&1){let t=_();r(0,"div",33)(1,"div",57),o(2,"Search"),n(),r(3,"h2"),o(4,"No products found"),n(),r(5,"p"),o(6,"Try adjusting your filters or search terms"),n(),r(7,"button",28),p("click",function(){m(t);let l=d();return u(l.resetFilters())}),o(8,"Reset All Filters"),n()()}}var Z=class a{constructor(e,t,i){this.productService=e;this.cartService=t;this.toastService=i}products=[];filteredProducts=[];categories=[];showFilters=!1;filters={priceRange:[0,2e4],rating:0,distance:5,sortBy:"popular"};sortOptions=[{value:"popular",label:"Most Popular"},{value:"rating",label:"Highest Rated"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"distance",label:"Nearest First"}];ngOnInit(){this.loadCategories(),this.loadProducts()}loadCategories(){this.productService.getCategories().subscribe(e=>{this.categories=[{name:"All",icon:"fa-grid",active:!0},...e.map(t=>T(B({},t),{active:!1}))]})}loadProducts(){this.productService.getProducts().subscribe(e=>{this.products=e.map(t=>T(B({},t),{inCart:this.cartService.isInCart(t.id),cartQuantity:this.cartService.getQuantity(t.id)})),this.filteredProducts=[...this.products],this.applyFilters()})}selectCategory(e){this.categories.forEach(t=>t.active=!1),e.active=!0,this.applyFilters()}applyFilters(){let e=[...this.products],t=this.categories.find(i=>i.active);t&&t.name!=="All"&&(e=e.filter(i=>i.category===t.name)),e=e.filter(i=>i.price>=this.filters.priceRange[0]&&i.price<=this.filters.priceRange[1]),this.filters.rating>0&&(e=e.filter(i=>(i.rating||0)>=this.filters.rating)),e=e.filter(i=>(i.distance||0)<=this.filters.distance),e.sort((i,l)=>{switch(this.filters.sortBy){case"popular":return(l.reviews||0)-(i.reviews||0);case"rating":return(l.rating||0)-(i.rating||0);case"price-low":return i.price-l.price;case"price-high":return l.price-i.price;case"distance":return(i.distance||0)-(l.distance||0);default:return 0}}),this.filteredProducts=e}toggleFilters(){this.showFilters=!this.showFilters}resetFilters(){this.filters={priceRange:[0,2e4],rating:0,distance:5,sortBy:"popular"},this.applyFilters()}toggleFavourite(e){this.productService.toggleFavourite(e.id),e.isFavourite=!e.isFavourite,this.toastService.success(e.isFavourite?`Added "${e.name}" to favorites!`:`Removed "${e.name}" from favorites`,2e3)}addToCart(e){if(e.stock===0){this.toastService.error(`"${e.name}" is out of stock!`);return}let t=this.cartService.addToCart(e);t.success?(e.inCart=!0,e.cartQuantity=this.cartService.getQuantity(e.id),this.toastService.success(`"${e.name}" added to cart!`)):this.toastService.warning(t.message||"Failed to add to cart")}increaseQuantity(e){this.cartService.updateQuantity(e.id,(e.cartQuantity||0)+1),e.cartQuantity++}decreaseQuantity(e){(e.cartQuantity||0)>1?(this.cartService.updateQuantity(e.id,e.cartQuantity-1),e.cartQuantity--):(this.cartService.removeFromCart(e.id),e.inCart=!1,e.cartQuantity=0)}getProductQuantity(e){return this.cartService.getQuantity(e.id)}getProductImage(e){return Array.isArray(e.product_images)&&e.product_images.length>0?e.product_images[0]:e.image||"assets/images/placeholder.jpg"}static \u0275fac=function(t){return new(t||a)(P(K),P(X),P(G))};static \u0275cmp=V({type:a,selectors:[["app-browser"]],decls:68,vars:11,consts:[[1,"main-content"],[1,"container"],[1,"browser-header"],[1,"page-title"],[1,"browser-controls"],[1,"search-box"],[1,"fas","fa-search"],["type","text","placeholder","Search foods, stores..."],[1,"filter-btn",3,"click"],[1,"fas","fa-filter"],[1,"categories-scroll"],[1,"categories"],[1,"category-item",3,"active"],[1,"filters-panel"],[1,"filters-header"],[1,"close-filters",3,"click"],[1,"filter-group"],[1,"price-range"],["type","range","min","0","max","20000","step","1000",3,"ngModelChange","change","ngModel"],[1,"rating-filter"],[1,"star-option",3,"active"],[3,"ngModelChange","change","ngModel"],["value","1"],["value","3"],["value","5"],["value","10"],[3,"value"],[1,"filter-actions"],[1,"reset-btn",3,"click"],[1,"apply-btn","btn-primary",3,"click"],[1,"results-count"],[1,"products-grid"],[1,"product-card"],[1,"no-results"],[1,"category-item",3,"click"],[1,"category-icon"],[1,"category-name"],[1,"star-option",3,"click"],[1,"fas","fa-star"],[1,"product-image"],[3,"src","alt"],[1,"favourite-btn",3,"click"],[1,"discount-badge"],[1,"product-info"],[1,"product-title"],[1,"product-description"],[1,"product-meta"],[1,"rating"],[1,"distance"],[1,"product-footer"],[1,"price"],[1,"current-price"],[1,"original-price"],[1,"quantity-controls"],[1,"add-to-cart-btn",3,"added","disabled"],[3,"click"],[1,"add-to-cart-btn",3,"click","disabled"],[1,"no-results-icon"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Browse Products"),n(),r(5,"div",4)(6,"div",5),g(7,"i",6)(8,"input",7),n(),r(9,"button",8),p("click",function(){return i.toggleFilters()}),g(10,"i",9),o(11," Filters "),n()()(),r(12,"div",10)(13,"div",11),b(14,ne,5,5,"div",12,te),n()(),r(16,"div",13)(17,"div",14)(18,"h3"),o(19,"Filters"),n(),r(20,"button",15),p("click",function(){return i.toggleFilters()}),o(21,"Close"),n()(),r(22,"div",16)(23,"label"),o(24,"Price Range"),n(),r(25,"div",17)(26,"span"),o(27,"\u20A60"),n(),r(28,"span"),o(29),F(30,"number"),n()(),r(31,"input",18),k("ngModelChange",function(s){return S(i.filters.priceRange[1],s)||(i.filters.priceRange[1]=s),s}),p("change",function(){return i.applyFilters()}),n()(),r(32,"div",16)(33,"label"),o(34,"Minimum Rating"),n(),r(35,"div",19),b(36,oe,4,2,"div",20,Q),n()(),r(38,"div",16)(39,"label"),o(40,"Maximum Distance"),n(),r(41,"select",21),k("ngModelChange",function(s){return S(i.filters.distance,s)||(i.filters.distance=s),s}),p("change",function(){return i.applyFilters()}),r(42,"option",22),o(43,"Within 1 mile"),n(),r(44,"option",23),o(45,"Within 3 miles"),n(),r(46,"option",24),o(47,"Within 5 miles"),n(),r(48,"option",25),o(49,"Within 10 miles"),n()()(),r(50,"div",16)(51,"label"),o(52,"Sort By"),n(),r(53,"select",21),k("ngModelChange",function(s){return S(i.filters.sortBy,s)||(i.filters.sortBy=s),s}),p("change",function(){return i.applyFilters()}),b(54,ae,2,2,"option",26,ie),n()(),r(56,"div",27)(57,"button",28),p("click",function(){return i.resetFilters()}),o(58,"Reset"),n(),r(59,"button",29),p("click",function(){return i.toggleFilters()}),o(60,"Apply"),n()()(),r(61,"div",30),o(62),n(),r(63,"div",31),b(64,pe,26,15,"div",32,re),n(),x(66,ge,9,0,"div",33),n()(),g(67,"app-footer")),t&2&&(c(14),C(i.categories),c(2),y("show",i.showFilters),c(13),f("\u20A6",E(30,8,i.filters.priceRange[1])),c(2),O("ngModel",i.filters.priceRange[1]),c(5),C(A(10,ee)),c(5),O("ngModel",i.filters.distance),c(12),O("ngModel",i.filters.sortBy),c(),C(i.sortOptions),c(8),f(" ",i.filteredProducts.length," products found "),c(2),C(i.filteredProducts),c(2),h(i.filteredProducts.length===0?66:-1))},dependencies:[$,U,Y,q,W,L,H,N,D,j,J,R],styles:[".browser-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:25px}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--dark);margin:0}.browser-controls[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--gray-color)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 20px 12px 45px;border-radius:25px;border:1px solid var(--border);background-color:var(--light);font-size:.9rem;transition:var(--transition)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);background-color:var(--lighter);box-shadow:0 0 0 3px #1a5d541a}.filter-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);padding:10px 16px;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:var(--transition);display:flex;align-items:center;gap:8px;color:var(--dark)}.filter-btn[_ngcontent-%COMP%]:hover{background:var(--light);border-color:var(--primary);color:var(--primary)}.categories-scroll[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:25px;padding-bottom:10px}.categories-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories[_ngcontent-%COMP%]{display:flex;gap:15px;min-width:max-content}.category-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:12px 16px;border-radius:var(--radius);background:#fff;cursor:pointer;transition:var(--transition);border:2px solid transparent;min-width:80px}.category-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow)}.category-item.active[_ngcontent-%COMP%]{border-color:var(--primary);background:var(--accent)}.category-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--light);display:flex;align-items:center;justify-content:center;color:var(--primary);font-size:1.2rem;transition:var(--transition)}.category-item.active[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.category-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--dark);text-align:center}.filters-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background:#fff;z-index:4080;transition:var(--transition);padding:20px;overflow-y:auto}.filters-panel.show[_ngcontent-%COMP%]{right:0}.filters-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:1px solid var(--border)}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--dark)}.close-filters[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;color:var(--gray-color);cursor:pointer;padding:8px;border-radius:50%;transition:var(--transition)}.close-filters[_ngcontent-%COMP%]:hover{background:var(--light);color:var(--dark)}.filter-group[_ngcontent-%COMP%]{margin-bottom:25px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:var(--dark)}.price-range[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;color:var(--gray-color);font-size:.9rem}.filter-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:var(--light);outline:none}.rating-filter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.star-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;transition:var(--transition)}.star-option[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.star-option.active[_ngcontent-%COMP%]{background:var(--accent);border-color:var(--primary)}.star-option[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--food-yellow)}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:1px solid var(--border);border-radius:var(--radius);background:var(--light);color:var(--dark);cursor:pointer;transition:var(--transition)}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);background:#fff}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px;padding-top:20px;border-top:1px solid var(--border)}.reset-btn[_ngcontent-%COMP%]{flex:1;background:var(--light);border:1px solid var(--border);padding:12px;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:var(--transition);color:var(--dark)}.reset-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.apply-btn[_ngcontent-%COMP%]{flex:1}.results-count[_ngcontent-%COMP%]{color:var(--gray-color);margin-bottom:20px;font-size:.9rem}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.no-results[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.no-results-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--border);margin-bottom:20px}.no-results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px;color:var(--dark)}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-color);margin-bottom:30px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:var(--transition);cursor:pointer}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.product-image[_ngcontent-%COMP%]{position:relative;height:160px;overflow:hidden}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:var(--transition)}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.favourite-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#ffffffe6;border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:var(--danger)}.favourite-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background:var(--food-orange);color:#fff;padding:4px 8px;border-radius:4px;font-size:.8rem;font-weight:600}.product-info[_ngcontent-%COMP%]{padding:15px}.product-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:5px;color:var(--dark)}.product-description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gray-color);margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px;font-size:.8rem;color:var(--gray-color)}.rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--food-yellow)}.product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.price[_ngcontent-%COMP%]{display:flex;flex-direction:column}.current-price[_ngcontent-%COMP%]{font-weight:700;color:var(--primary);font-size:1.2rem}.original-price[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--gray-color);font-size:.9rem}.add-to-cart-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;padding:8px 16px;border-radius:20px;font-size:.8rem;font-weight:600;cursor:pointer;transition:var(--transition);display:flex;align-items:center;gap:5px}.add-to-cart-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:scale(1.05)}.add-to-cart-btn.added[_ngcontent-%COMP%]{background:var(--success)}@media (min-width: 768px){.browser-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}.categories[_ngcontent-%COMP%]{justify-content:center}.category-item[_ngcontent-%COMP%]{min-width:100px}.filters-panel[_ngcontent-%COMP%]{width:400px;right:-400px}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.product-image[_ngcontent-%COMP%]{height:180px}}@media (min-width: 1024px){.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}"]})};export{Z as Browser};
