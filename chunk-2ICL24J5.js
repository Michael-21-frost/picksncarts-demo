import{a as A}from"./chunk-2625WBTU.js";import{a as $}from"./chunk-JCKFSXJE.js";import{t as j,u as q}from"./chunk-RAVIJAHJ.js";import{a as V}from"./chunk-HJXDVH5A.js";import{h as F,k as Q}from"./chunk-M7342E5H.js";import{k as z,l as T}from"./chunk-UR3PIVFL.js";import{$a as i,Bb as E,Ca as k,Cb as g,Db as u,Ua as h,V as x,Va as C,W as f,Ya as O,Za as P,_a as b,a as w,ab as n,bb as m,fb as M,ib as _,kb as p,oa as S,qa as o,sb as a,tb as v,ub as l,vb as I,wa as y}from"./chunk-2SFP4N2H.js";import"./chunk-EQDQRRRY.js";var L=()=>["/home"],D=(c,e)=>e.id;function N(c,e){if(c&1){let t=M();i(0,"button",6),_("click",function(){x(t);let s=p();return f(s.clearCart())}),m(1,"i",7),a(2," Clear Cart "),n()}}function R(c,e){c&1&&(i(0,"div",4)(1,"div",8),m(2,"i",9),n(),i(3,"h2"),a(4,"Your cart is empty"),n(),i(5,"p"),a(6,"Add some delicious food surprises to get started!"),n(),i(7,"a",10),m(8,"i",11),a(9," Buy Now "),n()()),c&2&&(o(7),b("routerLink",E(1,L)))}function Y(c,e){if(c&1){let t=M();i(0,"div",13)(1,"div",21),m(2,"img",22),n(),i(3,"div",23)(4,"h3",24),a(5),n(),i(6,"p",25),a(7),n(),i(8,"div",26),a(9),g(10,"number"),n(),i(11,"small",27),a(12),n()(),i(13,"div",28)(14,"div",29)(15,"button",30),_("click",function(){let s=x(t).$implicit,d=p(2);return f(d.decreaseQuantity(s.id))}),m(16,"i",31),n(),i(17,"span",32),a(18),n(),i(19,"button",33),_("click",function(){let s=x(t).$implicit,d=p(2);return f(d.increaseQuantity(s.id))}),m(20,"i",34),n()(),i(21,"button",35),_("click",function(){let s=x(t).$implicit,d=p(2);return f(d.removeItem(s.id))}),m(22,"i",36),n()()()}if(c&2){let t=e.$implicit,r=p(2);o(2),b("src",r.getProductImage(t),S)("alt",t.name),o(3),v(t.name),o(2),v(t.business_name||"Unknown Merchant"),o(2),l("\u20A6",u(10,8,t.price)),o(3),l("Stock: ",t.stock," available"),o(3),b("disabled",(t.cartQuantity||1)<=1),o(3),v(t.cartQuantity||1)}}function U(c,e){if(c&1&&(i(0,"div",16)(1,"span"),a(2),n(),i(3,"span"),a(4),g(5,"number"),n()()),c&2){let t=e.$implicit;o(2),v(t.name),o(2),I("",t.cartQuantity||1," x \u20A6",u(5,3,t.price))}}function G(c,e){if(c&1&&(i(0,"div",5)(1,"div",12),O(2,Y,23,10,"div",13,D),n(),i(4,"div",14)(5,"h3"),a(6,"Order Summary"),n(),i(7,"div",15)(8,"span"),a(9),n()(),O(10,U,6,5,"div",16,D),i(12,"div",15)(13,"span"),a(14,"Subtotal"),n(),i(15,"span"),a(16),g(17,"number"),n()(),i(18,"div",15)(19,"span"),a(20,"Delivery Fee"),n(),i(21,"span"),a(22),g(23,"number"),n()(),i(24,"div",15)(25,"span"),a(26,"Tax"),n(),i(27,"span"),a(28),g(29,"number"),n()(),i(30,"div",17)(31,"span"),a(32,"Total"),n(),i(33,"span",18),a(34),g(35,"number"),n()(),i(36,"button",19),m(37,"i",20),a(38," Proceed to Checkout "),n()()()),c&2){let t=p();o(2),P(t.cartItems),o(7),l("Items (",t.cartItems.length,")"),o(),P(t.cartItems),o(6),l("\u20A6",u(17,5,t.total-t.deliveryFee-t.serviceFee)),o(6),l("\u20A6",u(23,7,t.deliveryFee)),o(6),l("\u20A6",u(29,9,t.serviceFee)),o(6),l("\u20A6",u(35,11,t.total))}}var B=class c{constructor(e,t){this.cartService=e;this.toastService=t}cartItems=[];total=0;deliveryFee=500;serviceFee=50;subs=new w;ngOnInit(){this.cartItems=this.cartService.getCartItems(),this.recalculateTotal(),this.subs.add(this.cartService.cartTotal$.subscribe(e=>{this.total=e+this.deliveryFee+this.serviceFee})),this.subs.add(this.cartService.stockLimit$.subscribe(e=>{e&&(this.toastService.warning(e.message,3e3),this.cartItems=this.cartService.getCartItems(),this.recalculateTotal())}))}ngOnDestroy(){this.subs.unsubscribe()}recalculateTotal(){let e=this.cartItems.reduce((t,r)=>t+r.price*(r.cartQuantity||0),0);this.total=e+this.deliveryFee+this.serviceFee}updateQuantity(e,t){let r=this.cartItems.find(d=>d.id===e);if(!r)return;let s=this.cartService.updateQuantity(e,t);s.success?(this.cartItems=this.cartService.getCartItems(),this.recalculateTotal(),t===0&&this.toastService.info(`\u{1F5D1}\uFE0F "${r.name}" removed from cart`,2e3)):s.message&&(this.toastService.warning(s.message,3e3),this.cartItems=this.cartService.getCartItems(),this.recalculateTotal())}increaseQuantity(e){let t=this.cartItems.find(d=>d.id===e);if(!t)return;let r=t.cartQuantity||0,s=t.stock||1;if(r>=s){this.toastService.warning(`Only ${s} of "${t.name}" available`,3e3);return}this.updateQuantity(e,r+1)}decreaseQuantity(e){let t=this.cartItems.find(s=>s.id===e);if(!t)return;let r=t.cartQuantity||0;r>1?this.updateQuantity(e,r-1):this.removeItem(e)}removeItem(e){let t=this.cartItems.find(r=>r.id===e);t&&(this.cartService.removeFromCart(e),this.cartItems=this.cartService.getCartItems(),this.recalculateTotal(),this.toastService.info(`\u{1F5D1}\uFE0F "${t.name}" removed from cart`,2e3))}clearCart(){if(this.cartItems.length===0){this.toastService.info("Cart is already empty",2e3);return}this.cartService.clearCart(),this.cartItems=[],this.total=0,this.toastService.success("\u{1F6D2} Cart cleared successfully",2e3)}getProductImage(e){return e.image||(Array.isArray(e.product_images)?e.product_images[0]:e.product_images)||"assets/images/placeholder.jpg"}static \u0275fac=function(t){return new(t||c)(y(A),y($))};static \u0275cmp=k({type:c,selectors:[["app-cart"]],decls:7,vars:3,consts:[[1,"main-content"],[1,"container"],[1,"cart-header"],[1,"clear-cart-btn"],[1,"empty-cart"],[1,"cart-content"],[1,"clear-cart-btn",3,"click"],[1,"fas","fa-trash"],[1,"empty-icon"],[1,"fas","fa-shopping-cart"],["fragment","products-section","id","cart-btn",1,"btn","btn-primary",3,"routerLink"],[1,"fas","fa-utensils"],[1,"cart-items"],[1,"cart-item"],[1,"cart-summary"],[1,"summary-row"],[1,"summary-item-detail"],[1,"summary-total"],[1,"total-price"],["routerLink","/checkout",1,"checkout-btn","btn-primary"],[1,"fas","fa-lock"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"item-name"],[1,"item-store"],[1,"item-price"],[1,"text-muted"],[1,"item-controls"],[1,"quantity-controls"],[1,"quantity-btn",3,"click","disabled"],[1,"fas","fa-minus"],[1,"quantity"],[1,"quantity-btn",3,"click"],[1,"fas","fa-plus"],[1,"remove-btn",3,"click"],[1,"fas","fa-times"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),h(3,N,3,0,"button",3),n(),h(4,R,10,2,"div",4),h(5,G,39,13,"div",5),n()(),m(6,"app-footer")),t&2&&(o(3),C(r.cartItems.length>0?3:-1),o(),C(r.cartItems.length===0?4:-1),o(),C(r.cartItems.length>0?5:-1))},dependencies:[T,j,Q,F,q,V,z],styles:[".cart-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:20px;padding:0 10px}.page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--dark);margin:0}#cart-btn[_ngcontent-%COMP%]:active{background-color:var(--primary-dark);opacity:.7}.clear-cart-btn[_ngcontent-%COMP%]{background:var(--danger);color:#fff;border:none;padding:10px 16px;border-radius:var(--radius);font-size:.9rem;cursor:pointer;transition:var(--transition);display:flex;align-items:center;gap:8px;box-shadow:var(--shadow)}.clear-cart-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:translateY(-2px)}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);margin:20px 0}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--border);margin-bottom:15px}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:10px;color:var(--dark)}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-color);margin-bottom:25px;font-size:.9rem}.cart-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.cart-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:15px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);align-items:flex-start;border:1px solid var(--border)}.item-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:var(--radius);overflow:hidden;flex-shrink:0}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.item-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:4px;color:var(--dark);line-height:1.3;word-wrap:break-word}.item-store[_ngcontent-%COMP%]{font-size:.8rem;color:var(--gray-color);margin-bottom:6px}.item-price[_ngcontent-%COMP%]{font-weight:700;color:var(--primary);font-size:1rem;margin-bottom:4px}.item-details[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.item-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;flex-shrink:0}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:var(--light);border-radius:20px;padding:4px}.quantity-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);color:var(--dark);font-size:.8rem}.quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff;border-color:var(--primary)}.quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity[_ngcontent-%COMP%]{font-weight:600;min-width:20px;text-align:center;font-size:.9rem}.remove-btn[_ngcontent-%COMP%]{background:none;border:1px solid var(--danger);color:var(--danger);cursor:pointer;padding:6px;border-radius:50%;transition:var(--transition);width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:.8rem}.remove-btn[_ngcontent-%COMP%]:hover{background:var(--danger);color:#fff}.cart-summary[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--border);position:sticky;bottom:20px;margin-top:10px}.cart-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;padding-bottom:12px;border-bottom:1px solid var(--border);color:var(--dark);font-size:1.2rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;color:var(--gray-color);font-size:.9rem}.summary-item-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:6px;font-size:.8rem;color:var(--dark);padding-left:10px;border-left:2px solid var(--light)}.summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px;padding-top:12px;border-top:2px solid var(--border);font-weight:700;font-size:1.1rem;color:var(--dark)}.total-price[_ngcontent-%COMP%]{color:var(--primary)}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1rem;margin-top:15px;border:none;border-radius:var(--radius);background:var(--primary);color:#fff;cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center;gap:8px;font-weight:600}.checkout-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:var(--shadow-lg)}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]{padding:0}.cart-header[_ngcontent-%COMP%]{margin-bottom:15px;padding:0 5px}.clear-cart-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.empty-cart[_ngcontent-%COMP%]{padding:30px 15px;margin:15px 0}.empty-icon[_ngcontent-%COMP%]{font-size:2.5rem}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.cart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px;padding:12px}.item-image[_ngcontent-%COMP%]{width:100%;height:140px;align-self:center}.item-details[_ngcontent-%COMP%]{text-align:center}.item-controls[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;width:100%}.quantity-controls[_ngcontent-%COMP%]{margin:0 auto}.remove-btn[_ngcontent-%COMP%]{order:-1}.cart-summary[_ngcontent-%COMP%]{position:static;margin-top:20px}.summary-item-detail[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.cart-item[_ngcontent-%COMP%]{padding:10px}.item-image[_ngcontent-%COMP%]{height:120px}.item-name[_ngcontent-%COMP%], .item-price[_ngcontent-%COMP%]{font-size:.9rem}.quantity-controls[_ngcontent-%COMP%]{gap:6px}.quantity-btn[_ngcontent-%COMP%]{width:24px;height:24px;font-size:.7rem}.quantity[_ngcontent-%COMP%]{font-size:.8rem}.remove-btn[_ngcontent-%COMP%]{width:28px;height:28px;font-size:.7rem}.cart-summary[_ngcontent-%COMP%]{padding:15px}.cart-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.summary-row[_ngcontent-%COMP%], .summary-total[_ngcontent-%COMP%]{font-size:.85rem}}@media (min-width: 769px) and (max-width: 1024px){.cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:25px}.cart-item[_ngcontent-%COMP%]{align-items:center}.item-image[_ngcontent-%COMP%]{width:70px;height:70px}.item-controls[_ngcontent-%COMP%]{flex-direction:row;gap:15px}}@media (min-width: 1025px){.cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:30px;align-items:start}.cart-items[_ngcontent-%COMP%]{gap:15px}.cart-item[_ngcontent-%COMP%]{align-items:center}.item-image[_ngcontent-%COMP%]{width:80px;height:80px}.item-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}@media (min-width: 1200px){.cart-content[_ngcontent-%COMP%]{grid-template-columns:3fr 1fr}.cart-item[_ngcontent-%COMP%]{padding:20px}.item-image[_ngcontent-%COMP%]{width:90px;height:90px}}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);padding-bottom:20px}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 15px}app-footer[_ngcontent-%COMP%]{margin-top:auto}"]})};export{B as Carts};
